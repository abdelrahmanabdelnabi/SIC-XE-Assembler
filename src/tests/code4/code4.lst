                  . changed: device number 05 to 01
00000            COPY    START   0    
00000  17202A    FIRST   STL     RETADR    
00003  69202A            LDB     #LENGTH    
00003                    BASE    LENGTH    
00006  4B101033  CLOOP  +JSUB    RDREC    
0000A  032023            LDA     LENGTH    
0000D  290000            COMP    #0    
00010  332007            JEQ     ENDFIL    
00013  4B10105C         +JSUB    WRREC    
00017  3F2FEC            J       CLOOP    
0001A  001075    ENDFIL  LDA     *0 (WORD C'EOF')    
0001D  0F2013            STA     BUFFER    
00020  010003            LDA     #3    
00023  0F200A            STA     LENGTH    
00026  4B10105C         +JSUB    WRREC    
0002A  3E2000            J       @RETADR    
0002D  000000    RETADR  RESW    1    
00030  000000    LENGTH  RESW    1    
00033  00....00  BUFFER  RESB    4096    
                  
                  . Subroutine to read record into buffer
                  
01033  B410      RDREC   CLEAR   X    
01035  B400              CLEAR   A    
01037  B440              CLEAR   S    
01039  75101059         +LDT     #MAXLEN    
0103D  E32038    RLOOP   TD      *1 (WORD X'F1')    
01040  332FFA            JEQ     RLOOP    
01043  DB2032            RD      *1 (WORD X'F1')    
01046  A004              COMPR   A,S    
01048  332008            JEQ     EXIT    
0104B  57C003            STCH    BUFFER,X    
0104E  B850              TIXR    T    
01050  3B2FEA            JLT     RLOOP    
01053  134000    EXIT    STX     LENGTH    
01056  4F0000            RSUB        
01059  000000    MAXLEN  RESW    1    
                  
                  . Subroutine to write record from buffer
                  
0105C  B410      WRREC   CLEAR   X    
0105E  774000            LDT     LENGTH    
01061  E32017    WLOOP   TD      *2 (WORD X'01')    
01064  332FFA            JEQ     WLOOP    
01067  53C003            LDCH    BUFFER,X    
0106A  DF200E            WD      *2 (WORD X'01')    
0106D  B850              TIXR    T    
0106F  3B2FEF            JLT     WLOOP    
01072  4F0000            RSUB        
01075  454F46    *0      WORD    C'EOF'    
01078  F10000    *1      WORD    X'F1'    
0107B  010000    *2      WORD    X'01'    
0107E                    END     FIRST    
